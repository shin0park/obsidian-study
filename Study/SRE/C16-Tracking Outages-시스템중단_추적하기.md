# Tracking Outages
Outages: 일반적으로 시스템의 정상적인 작동이 중단된 상태를 의미 

### Outalator
- Outalator는 Google에서 사용하는 장애 추적 도구로, 모니터링 시스템에서 발생한 모든 알림을 수집하고 이를 그룹화, 주석 추가, 분석할 수 있다.
- Postmortem은??? -> **Postmortem**은 개별 사고에 대한 상세 정보를 제공하지만, 큰 영향을 미친 사건에만 작성되어 반복적이고 소규모의 문제를 놓칠 수 있다.
- ex) 
	- 비상 대기 업무 도중 한 팀이 얼마나 많은 수의 장애알림을 받았는지, 
	- 지난 분기 후속 조치가 가능한 알림과 그렇지 않은 알림의 비율은 얼마인지, 
	- 어떤 서비스에 팀의 가장 많은 노력이 투입되어있는지 
	  에 대한 유용한 정보를 추출할 수 있다.

### Escalator
- Google의 SRE 팀은 모든 알림을 중앙 시스템에서 관리하며, 설정된 시간이 지나도 사람이 확인하지 않으면 알림을 상위 담당자에게 에스컬레이션 한다.

#### Outalator의 기능 및 수집
- **기능 및 수집**
    - 다수의 대기열을 한 화면에서 확인할 수 있는 **아우터레이터의 큐 뷰** 제공
    - 원본 알림 복사본과 이메일 답장을 저장하며, 중요 주석은 "중요"로 표시하여 불필요한 정보를 숨길 수 있음
    - 다중 알림을 하나의 장애(incident)로 그룹화하여 중복된 디버깅과 혼란 방지
	    - 예를들어, 이메일로 알림 중복을 설명하는 대신 시스템적으로 통합하여 혼란을 최소화 할 수 있다.
    - 예로, 오늘 발생한 장애 수와 오늘 발송된 알림을 별도로 분석도 가능하다
- ex
    - 네트워크 실패로 여러 팀이 각자 알림을 받을 경우 이를 하나의 사건으로 그룹화 가능하다
    - 개발자 팀과 SRE 팀 간 상호작용을 통해 문제 해결 속도를 높였다

#### 태깅 Tagging
- 태그를 통해 장애 알림의 유무, 원인, 조치 등을 분류 가능하다.
- 클론을 구분자로 인식하여 구조화된 namespace를 지원한다.
- ex) `cause:network`, `action:restart`
- 잘못된 태그(`cause:netwrok`)도 발생하지만 사전에 정의된 목록을 통해 걸러낼 수 있고 팀별로 자체적으로 정해놓은 태그로 구분하여 사용할 수 있다.
- 예시
	- 버그 추적 시스템의 해당 버그 페이지에 대한 링크 제공 (`bug:76543`)
	- 잘못된 알림은 "bogus" 태그로 관리

#### 분석 및 보고

- **데이터 분석**
    - 주/월/분기별 사건 발생 빈도, 사건당 알림 수와 같은 통계를 제공
    - 팀 혹은 서비스의 시간별 데이터를 비교함으로써 최초의 패턴과 추이를 찾을 수 있음.
    - **예:** "이번 주에 세 번째 발생"인지, 본래 하루에 다섯 번씩 발생하던 것인지
- 위의 데이터 분석 다음 단계는, 의미적 분석을 필요로하는 더 포괄적인 이슈를 찾는 것이 필요
    - 반복적으로 문제를 유발하는 인프라 요소를 파악하고, 안정성을 강화하는 솔루션 도출힌다
    - ex) 올바르지 않는 데이터나 높은 지연응답 알림 -> 두 조건은 모두 네트워크 과부화로 인해 데이터베이스 복제가 늦어져 발생 가능성 존재.
- **보고 및 소통**
    - 중요한 주석과 태그를 포함한 상태를 다음 차례 비상 대기 엔지니어에게 전달한다.
    - Outalator는 프로덕션 서비스에 대한 정지적 리뷰를 위해 "보고 모드"를 지원
	    - 해당 모드는 장애 에 대한 신속한 개요 제공을 위해 주 목록에 중요한 주석을 추가로 보여주는 모드

#### 예상치 못한 이득

- outage 장애와 함께 발송되는 알림을 확인했을때 이득을 올릴 수 있다.
    - 특정 팀에서 알림이 발생했지만 다른 팀에 전송되지 않은 경우 해당 팀에 직접 알려주는 것이 좋다.
    - **예:** Bigtable 장애가 발생했지만 관련 SRE 팀이 알림을 받지 않은 경우 직접 알려줌
    - 이로써 장애 해결책이 크게 달라지거나 최소한 장애 완화가 가능
- Dummy 에스컬레이터 설정
	- 사람이 직접 수신하는 알림은 없지만 outalator가 직접 수신하게 하고 태그와 주석을 붙여 리뷰
    - 특별한 권한을 가진 계정 사용 기록이나 주기적 작업 상태를 Outalator에서 기록하고 자동으로 주석 추가하는 것
    - **예:** 데이터베이스 스키마 변경 자동 적용 기록

