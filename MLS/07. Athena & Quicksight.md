### **Amazon Athena**

- S3에 저장된 데이터를 표준 SQL을 사용하여 쿼리할 수 있는 서버리스 대화형 쿼리 서비스 (Presto 기반)
	- 내부적으로 Presto 엔진을 사용
- 특징:
	- 데이터 로드나 ETL 작업 필요 없이 S3에 데이터가 있는 상태 그대로 즉시 쿼리를 실행할 수 있다.
	- 다양한 포맷 지원(CSV, JSON, ORC,arquet, Avro)
    
- **사용 사례**
    - 웹 로그 임시(Ad-hoc) 쿼리
    - Redshift 적재 전 데이터 검증
    - CloudTrail·CloudFront·VPC·ELB 로그 분석
	- **통합 환경:** Jupyter, Zeppelin, RStudio와 같은 노트북 환경과 통합되며, QuickSight와 같은 BI(Business Intelligence) 도구와도 연동되어 데이터 시각화 및 분석을 지원한다.
	  
-  **Athena와 AWS Glue의 연동**
	- Athena의 핵심적인 기능은 AWS Glue Data Catalog와의 통합에서 비롯됨
	- Athena는 데이터를 미리 로드하지 않기 때문에, 쿼리를 실행하려면 데이터의 구조(테이블 스키마)에 대한 정보가 필요한데, 이 메타데이터는 AWS Glue Data Catalog에 저장되며, Athena는 이 카탈로그를 통해 S3에 있는 데이터의 구조를 파악하고 SQL 쿼리를 실행한다.

- **비용**: 스캔 데이터 기준 과금($5/TB), 종량제 모델 채택
	- DDL 문(CREATE, ALTER, DROP 등)이나 실패한 쿼리에는 요금이 부과하지 않음
	- 컬럼 기반 포맷 사용 시 30~90% 절감
		- 예. ORC(Optimized Row Columnar)나 Parquet
		- 특정 컬럼만 읽을 수 있기 때문에 스캔되는 데이터 양이 감소
	- 파티셔닝
		- 쿼리 범위 제한하여 불필요한 데이터 스캔 막을 수 있음.
- **보안**: IAM, ACL, S3 정책
	- S3 암호화
		- SSE-S3, SSE-KMS, CSE-KMS 
	- TLS 전송 암호화 (between Athena and S3)
	- 작업그룹: 
		- workgroup을 사용하여 쿼리 실행 제어, 비용 제한 설정, 쿼리 기록 접근 관리 가능
- **주의**: 시각화·ETL 작업은 QuickSight·Glue 권장
    

---

### **Amazon QuickSight**

- 클라우드 기반 BI(비즈니스 인텔리전스) 서비스
- 개발자 만이 아닌 조직의 모든 구성원이 비즈니스 인사이트를 얻을 수 있도록 대시보드, 보고서, 시각화 기능을 제공
- 시각화, 임시 분석, 대시보드 제작 가능
- **데이터 소스**: 
	- Redshift
	- Aurora/RDS
	- Athena
	- Files( S3 or 온프레미스)
	- EC2-hosted databases
	- AWS IoT Analytics 
- **SPICE 엔진**: 
	- QuickSight의 핵심 기술로, 초고속, 병렬, 인메모리 계산 엔진
	- 병렬 인메모리 컬럼 저장, 10GB 기본 제공, 빠른 쿼리 처리
	- SPICE는 컴퓨팅과 스토리지를 분리하는 AWS의 핵심 아키텍처 철학을 반영한다.
		- 원본 데이터는 Amazon S3, Redshift 등 다양한 소스에 저장되고, QuickSight는 SPICE를 통해 필요한 데이터만 메모리에 올려 분석함으로써 확장성과 효율성을 동시에 확보한다.
- **활용 예시**: 
	- 주요 사례: 사용자가 데이터에 대한 즉흥적인 질문에 답을 찾고, 실시간으로 데이터를 탐색하며 시각화하는 것
	- 주요 비즈니스 지표(KPI)를 포함하는 대시보드를 생성하고 공유
		- 조직의 성과를 한눈에 파악하고 전략적 의사결정을 지원
	- 다양한 데이터 소스 분석 및 시각화
		- Logs in S3
		- On-premise databases
		- AWS (RDS, Redshift, Athena, S3)
		- SaaS applications, such as Salesforce
		- Any JDBC/ODBC data source
		  
- **Machine Learning Insights**:
	- 데이터 사이언스에 대한 사전 경험이 없는 사용자도 고급 분석을 수행할 수 있도록 머신러닝 기반의 인사이트를 제공한다.
		- **이상 감지 (Anomaly Detection):** 데이터의 비정상적인 패턴이나 이상치를 자동으로 식별하여 사용자에게 통보
		- **예측 (Forecasting):** 과거 데이터를 기반으로 미래 값을 예측
		- **Auto-narratives:** 시각화된 데이터에 대한 주요 인사이트를 자연어로 자동 요약하여 제공. 예를 들어, "작년 대비 올해 매출이 4.6% 감소했습니다"와 같이 데이터를 쉽게 이해할 수 있는 문장으로 변환
- **QuickSight Q:** 자연어 처리(NLP)를 기반으로 사용자의 질문에 답하는 기능입니다. "플로리다에서 가장 많이 팔리는 품목은 무엇인가요?"와 같은 질문에 대한 답을 데이터에서 찾아 시각화
- **페이지 보고서(Paginated Reports)**: 
	- 인쇄용으로 설계된 멀티 페이지 리포트
	- 이 기능은 재무제표나 재고 현황 보고서와 같이 인쇄에 최적화된, 정형화된 보고서를 생성하는 데 활용됨
- **QuickSight의 안티패턴 (Anti-Patterns)**
	- ETL (Extract, Transform, Load)
		- QuickSight는 데이터 준비 단계에서 제한적인 변환 기능을 제공하지만, 복잡하고 대규모의 ETL 작업에는 적합하지 않는다. 
		- 이는 AWS Glue와 같은 AWS의 전용 ETL 서비스를 사용하는 것을 권장
- **보안**: 
	- MFA 
	- VPC connectivity
		- QuickSight의 IP 주소 범위를 database SG에 추가하여 VPC 연결을 구성
	- Row-level security
		- 특정 사용자가 접근할 수 있는 데이터의 행을 제한
	- Column-level security too (CLS) 
		- Enterprise edition only 에서만 제공
		- 특정 사용자가 볼 수 있는 열을 제어
	- Private VPC access
		- ENI와 AWS Direct Connect를 사용하여 프라이빗 VPC 액세스를 구성
- **사용자 관리**: IAM, 이메일, SAML SSO, AD(Active Directory) 통합
- **시각화 타입**: AutoGraph, 막대/선/산점도/히트맵/원형/도넛/게이지/트리맵/KPI/지도/워드클라우드

#### QuickSight Visual Types

![](images/Pasted%20image%2020250812004936.png)

![](images/Pasted%20image%2020250812004944.png)

![](images/Pasted%20image%2020250812005044.png)

![](images/Pasted%20image%2020250812005049.png)

![](images/Pasted%20image%2020250812005108.png)
![](images/Pasted%20image%2020250812005113.png)
![](images/Pasted%20image%2020250812005124.png)
![](images/Pasted%20image%2020250812005152.png)
![](images/Pasted%20image%2020250812005204.png)
![](images/Pasted%20image%2020250812005218.png)
![](images/Pasted%20image%2020250812005223.png)

| 분석 목적            | 시각화 유형                                                    | 상세 설명                                         |
| ---------------- | --------------------------------------------------------- | --------------------------------------------- |
| **비교 및 분포**      | 막대 차트 (Bar Charts)                                        | 단일 또는 다중 지표를 비교하거나 데이터의 분포를 나타내는 데 사용됩니다.     |
| **시간 경과에 따른 변화** | Line Charts                                               | 시간에 따른 데이터의 추세를 보여줍니다. 면적 차트도 이 목적에 부합합니다.    |
| **상관관계**         | 분산형 차트 (Scatter plots), 히트맵 (Heat maps)                   | 두 차원 간의 교차점을 시각화하여 데이터 간의 상관관계를 파악하는 데 유용합니다. |
| **집계 및 구성**      | 원형 차트 (Pie charts), 도넛 차트 (Donut Charts), 트리맵 (Tree maps) | 전체에 대한 각 부분의 비율이나 계층적 데이터를 집계하여 보여줍니다.        |
| **표 형식 데이터**     | 피벗 테이블 (Pivot tables)                                     | 여러 필드를 행과 열로 구성하여 복잡한 데이터를 표 형태로 요약하고 분석합니다.  |
| **핵심 지표 추적**     | KPI (Key Performance Indicators), 게이지 차트 (Gauge Charts)   | 주요 지표를 목표 값과 비교하거나 특정 측정값의 상태를 보여줍니다.         |
| **기타 시각화**       | 지리 공간 차트 (Geospatial Charts), 워드 클라우드 (Word Clouds)       | 지리적 위치 정보를 시각화하거나 단어 및 구문의 빈도를 표현하는 데 사용됩니다.  |
