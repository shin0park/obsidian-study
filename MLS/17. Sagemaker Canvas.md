### **SageMaker Canvas**

**SageMaker Canvas 개요**

- **비즈니스 애널리스트를 위한 No-code(코드 없는) 머신러닝 도구**
    - 프로그래밍 지식이 없어도 예측 모델을 만들 수 있음
    - 사용자 친화적인 시각적 인터페이스 제공
    - Canvas는 데이터 준비부터 모델 구축, 예측 생성 및 배포에 이르는 전체 ML 워크플로우를 포괄적으로 지원
    - Canvas는 내부적으로 SageMaker Autopilot의 자동 머신러닝(AutoML) 기능을 활용하여, 사용자가 데이터와 타겟 변수를 지정하면 자동으로 여러 알고리즘을 훈련하고 하이퍼파라미터 최적화(Hyperparameter Optimization)를 수행하여 가장 정확한 맞춤형 모델을 생성
    - 최근 Amazon Q Developer와 통합되어, 사용자가 자연어로 비즈니스 목표를 설명할 경우, Q Developer가 데이터 준비 및 모델 구축 과정을 안내하고 지원하는 기능까지 제공한다.
      
- 초기 CSV 형식의 데이터 업로드만 지원
	- 현재 Amazon S3, Amazon Redshift, Amazon Athena, Snowflake 등 50개 이상의 다양한 데이터 소스로부터 데이터를 가져와 통합하는 광범위한 기능을 제공
    
- **예측 대상 컬럼을 선택 → 자동으로 모델 생성 및 예측 수행**
	- Target column을 선택
	- 타켓에 따라 자동으로 지도 학습(Supervised Learning) 모델 유형을 식별
		- **분류(Classification)** 또는 **회귀(Regression)** 문제 지원
- **데이터셋 병합 기능**도 제공
- **자동 데이터 정제(Auto data cleaning)** 기능 포함
    - 결측값(Missing values) 처리: 누락된 데이터 포인트의 감지 및 처리
    - 이상치(Outliers) 처리: 데이터 분포에서 크게 벗어나 모델 정확도를 저해할 수 있는 값의 식별 및 조정
    - 중복값(Duplicates) 제거
      
- SageMaker Data Wrangler와의 통합: 
	- 최근 통합하면서 데이터 준비 기능을 확장함.
	- 사용자는 300개 이상의 내장된 변환 및 분석 기능을 활용하여 데이터 품질을 개선하고 모델 성능을 향상시킬 수 있다.`
	- Amazon Q Developer를 활용하여 자연어 명령을 통해 복잡한 데이터 변환을 수행 가능 하다.
	  
- **SageMaker Studio와의 연동**
    - 생성한 모델과 데이터셋을 공유 가능
    - 비즈니스 사용자가 빠르게 구축한 노코드 모델을 전문 데이터 과학자가 Studio 환경으로 가져와 코드 수준의 정밀한 검토, 추가 미세 조정, 또는 복잡한 MLOps 파이프라인으로의 통합을 수행 가능해졌다.

### **SageMaker Canvas Demo**

- 사용자는 데이터를 업로드하고, 예측할 타깃 컬럼을 지정한 후  
	모델을 생성 및 결과를 시각적으로 확인할 수 있음
	
- 완전히 GUI 기반이므로, 데이터 과학자가 아닌 비즈니스 담당자도 활용 가능

- 모델 훈련 완료시, Canvas는 SageMaker Autopilot이 생성한 모델 성능 보고서와 데이터 탐색 보고서를 통해 모델의 효과를 평가할 수 있다.
	- **배치 예측 (Batch Prediction):** 새로운 대규모 데이터셋(예: CSV 파일)을 업로드하여 한 번에 예측을 수행. 이 방식은 대량의 데이터에 대해 주기적으로 예측이 필요할 때 유용
    
	- **단일 예측 (Single Prediction):** 사용자 인터페이스에 특정 데이터 포인트를 수동으로 입력하여 실시간으로 예측 결과를 얻는다. 이 방식은 예측의 확률 점수(Confidence Score)를 즉시 확인하고 해석하는 데 사용


### **SageMaker Canvas – The Finer Points (세부 사항)**

SageMaker Canvas는 비즈니스 사용자가 쉽게 접근할 수 있도록 설계되었지만, 그 운영 환경은 IT 관리자의 세밀한 구성 및 관리를 필요로 한다.

- 로컬 파일 업로드 및 S3/CORS 설정:
	- **로컬 파일 업로드 설정**은 조직의 IT 관리자가 사전에 구성해야 함
	- Canvas는 데이터를 안전하게 저장하고 처리하기 위해 Amazon S3 버킷을 활용
	- **S3 버킷 연결** 시 데이터에 안전하게 접근할 수 있도록 적절한 CORS(Cross-Origin Resource Sharing) 권한 설정 필요
    
- **Okta SSO(Single Sign-On)** 통합 가능
    
- Canvas는 SageMaker Domain 내에서 실행되는 애플리케이션이며, 이 도메인은 최신 기능 및 보안 환경 유지를 위해 관리자에 의해 **수동으로 업데이트(manually updated)** 되어야 한다.
	- 메인은 Canvas를 비롯한 다양한 SageMaker ML 환경을 지원하며, 사용자 권한 및 리소스 격리를 위한 기본 경계 역할을 한다.
    
- 외부 데이터 소스 및 IAM 연동
	- **Amazon Redshift**로부터 직접 데이터 가져오기(import) 가능
	- 시계열 데이터(Time series)를 사용하여 미래를 예측하는 기능을 활용하기 위해서는 IAM 정책을 통해 해당 기능이 명시적으로 활성화 되어야 한다.
    
- **VPC 환경 내 실행** 지원 (보안 네트워크 환경에서의 사용 가능)
	- 보안 및 규정 준수 요구사항이 높은 환경에서 Canvas를 운영하기 위해, Canvas는 고객 소유의 **VPC(Virtual Private Cloud) 내에서 실행**될 수 있다.

- **요금 구조:**
	- (강의)
	    - 시간당 **$1.90**
	    - 모델 내 **training cell 수에 따라 추가 요금 부과**
    - (AWS 문서)
	    - https://aws.amazon.com/sagemaker/ai/canvas/pricing/
	    - **Workspace 인스턴스 (Session-Hrs):** 
		    - 사용자가 Canvas 애플리케이션에 로그인하여 사용하는 시간에 따라 부과되는 시간당 요금
		    - 세션은 애플리케이션을 시작할 때 시작되며, 사용자가 명시적으로 로그아웃하거나 관리자가 세션을 종료할 때까지 지속되므로, 사용 시간을 관리하는 것이 비용 관리에 중요
		      
		- **모델 훈련 요금 (Model Training Charges):** 훈련 요금은 모델 유형에 따라 다르게 계산
		    - **표 형식 모델 (Tabular Models):** 분류(Classification), 회귀(Regression), 시계열(Time-series) 예측과 같은 표 형식 데이터 모델의 경우, 훈련에 사용된 데이터셋의 **총 셀 수(number of cells)**를 기준으로 요금이 부과
	        
		    - **컴퓨터 비전(CV) 및 자연어 처리(NLP) 모델:** 이러한 복잡한 모델의 훈련 요금은 모델을 훈련하는 데 소요된 **컴퓨팅 시간(compute time)**을 기준으로 부과되며, 이는 SageMaker 훈련 인스턴스의 시간당 요금(예: ml.g4dn.12xlarge의 시간당 $4.89 등)을 따른다.
---

### **SageMaker Training Compiler**

**SageMaker Training Compiler란?**
- 딥러닝(DL) 모델의 훈련 속도를 가속화하기 위해 GPU 인스턴스에서 훈련 작업을 컴파일하고 최적화하는 기능
- AWS Deep Learning Containers(DLCs)에 **통합되어 제공**
    → 사용자 지정 컨테이너(Bring Your Own Container, BYOC) 사용이 불가라 되어있지만, AWS DLC를 기반으로 **확장된 사용자 지정 컨테이너는 지원될 수 있음

- 주요 목표는 GPU 인스턴스의 활용 효율을 극대화하여 훈련 성능을 높이는 것 
	- **학습 속도 최대 50%까지 향상 가능
- **GPU 인스턴스**(예: `ml.p3`, `ml.p4`)에서 학습 작업을 **컴파일 및 최적화**.
    
- 모델을 **하드웨어에 최적화된 명령어로 변환**하여 성능 향상.
    
- **Hugging Face Transformers 라이브러리**와 통합 테스트 완료.  
    (직접 작성한 모델도 사용 가능)
    
- **SageMaker 분산 학습(distributed training) 라이브러리와는 호환되지 않음.**
    

**모범 사례 (Best Practices):**

1. GPU 인스턴스(`ml.p3`, `ml.p4`) 사용 보장.
    
2. PyTorch 모델은 **PyTorch/XLA의 model save 함수**로 저장해야 함.
    
3. `compiler_config`의 `debug` 플래그를 활성화해 **디버깅 지원** 가능.

---